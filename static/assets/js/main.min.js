'use strict';

ScrollReveal({
	distance: '100px',
	duration: 1000,
	delay: 200
});

// List Services
ScrollReveal().reveal('.service-block .list-service .col-12:nth-child(1)', {
	delay: 200,
	origin: 'bottom'
});
ScrollReveal().reveal('.service-block .list-service .col-12:nth-child(2)', {
	delay: 300,
	origin: 'bottom'
});
ScrollReveal().reveal('.service-block .list-service .col-12:nth-child(3)', {
	delay: 400,
	origin: 'bottom'
});
ScrollReveal().reveal('.service-block .list-service .col-12:nth-child(4)', {
	delay: 500,
	origin: 'bottom'
});
ScrollReveal().reveal('.service-block .list-service .col-12:nth-child(5)', {
	delay: 600,
	origin: 'bottom'
});
ScrollReveal().reveal('.service-block .list-service .col-12:nth-child(6)', {
	delay: 700,
	origin: 'bottom'
});
ScrollReveal().reveal('.service-block .list-service .col-12:nth-child(7)', {
	delay: 500,
	origin: 'bottom'
});
ScrollReveal().reveal('.service-block .list-service .col-12:nth-child(8)', {
	delay: 900,
	origin: 'bottom'
});

// List Blog
ScrollReveal().reveal('.blog-list.style-one .row >div:nth-child(1)', {
	delay: 200,
	origin: 'bottom'
});
ScrollReveal().reveal('.blog-list.style-one .row >div:nth-child(2)', {
	delay: 300,
	origin: 'bottom'
});
ScrollReveal().reveal('.blog-list.style-one .row >div:nth-child(3)', {
	delay: 400,
	origin: 'bottom'
});
ScrollReveal().reveal('.blog-list.style-one .row >div:nth-child(4)', {
	delay: 500,
	origin: 'bottom'
});

// slider

if ($('.slider-block .slider-main').length) {
	$('.slider-block .slider-main').slick({
		dots: true,
		arrows: true,
		prevArrow: '.prev-arrow',
		nextArrow: '.next-arrow',
		slidesToShow: 1,
		slidesToScroll: 1,
		touchThreshold: 100,
		infinite: true,
		swipe: true,
		swipeToSlide: true,
		autoplay: true,
		autoplaySpeed: 3000,
		speed: 800,
		pauseOnFocus: true,
		pauseOnHover: true,
		pauseOnDotsHover: true
	});
}

// change active nav
var listNav = document.querySelectorAll('.list-nav');
var filterItem = document.querySelectorAll('.item-filter');
if (listNav) {
	listNav.forEach(function (listNavItem) {
		listNavItem.onclick = function (selectedItem) {
			if (selectedItem.target.classList.contains('nav-item')) {
				// add active class
				listNavItem.querySelector('.active').classList.remove('active');
				selectedItem.target.classList.add('active');

				//get data-name value
				var filterName = selectedItem.target.getAttribute('data-name');
				filterItem.forEach(function (item) {
					if (filterName === item.getAttribute('data-name')) {
						item.classList.add('show');
						item.classList.remove('hide');
					} else {
						item.classList.remove('show');
						item.classList.add('hide');
					}
				});
			}
		};
	});
}

// scroll to top
var scrollTopBtn = document.querySelector('.scroll-to-top-btn');
window.addEventListener('scroll', function () {
	if (window.pageYOffset > 200) {
		scrollTopBtn.classList.add('active');
	} else {
		scrollTopBtn.classList.remove('active');
	}
});

// count number
if (document.querySelector('.count-block .counter')) {
	$(document).ready(function () {
		$('.counter').counterUp({
			delay: 10,
			time: 1000
		});

		// Menggunakan event scroll untuk memeriksa saat elemen masuk viewport
		$(window).on('scroll', function () {
			$('.counter').each(function () {
				if (isElementInViewport(this) && !$(this).data('counterup-nums')) {
					// Memastikan bahwa penghitung hanya dipicu jika data belum ada
					$(this).counterUp({
						delay: 10,
						time: 1000
					});
				}
			});
		});

		// Fungsi untuk memeriksa apakah elemen berada dalam viewport
		function isElementInViewport(el) {
			var rect = el.getBoundingClientRect();
			return (
				rect.top >= 0 &&
				rect.left >= 0 &&
				rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
				rect.right <= (window.innerWidth || document.documentElement.clientWidth)
			);
		}
	});
}

// change active features home3
var listNavItems = document.querySelector('.list-nav-item');
var navItemFeature = document.querySelectorAll('.content-filter');
if (listNavItems) {
	listNavItems.onclick = function (selectedItem) {
		if (selectedItem.target.classList.contains('nav-item')) {
			// add active class
			listNavItems.querySelector('.active').classList.remove('active');
			selectedItem.target.classList.add('active');

			//get data-name value
			var filterName = selectedItem.target.getAttribute('data-name');
			navItemFeature.forEach(function (item) {
				if (filterName === item.getAttribute('data-name')) {
					item.classList.add('show');
					item.classList.remove('hide');
				} else {
					item.classList.remove('show');
					item.classList.add('hide');
				}
			});
		}
	};
}

// open answer faqs
var questionItem = document.querySelectorAll('.question-item');
if (questionItem) {
	questionItem.forEach(function (item, index) {
		var titleItem = item.querySelector('.question-item-main');
		titleItem.addEventListener('click', function () {
			item.classList.toggle('open');
			removeOpen(index);
		});
	});
}
function removeOpen(index1) {
	questionItem.forEach(function (item2, index2) {
		if (index1 != index2) {
			item2.classList.remove('open');
		}
	});
}

// change switch btn pricing
var switchBtn = document.querySelector('.switch');
var listPricingMonth = document.querySelector('.list-pricing');
var listPricingYear = document.querySelector('.list-pricing-year');
if (switchBtn) {
	switchBtn.addEventListener('click', function () {
		switchBtn.classList.toggle('enable');
		var text = switchBtn.parentElement.querySelectorAll('.body3');
		text.forEach(function (item) {
			if (item.classList.contains('text-placehover')) {
				item.classList.remove('text-placehover');
			} else {
				item.classList.add('text-placehover');
			}
		});
		if (switchBtn.classList.contains('enable')) {
			console.log(switchBtn);
			listPricingMonth.classList.remove('show');
			listPricingMonth.classList.add('hide');
			listPricingYear.classList.remove('hide');
			listPricingYear.classList.add('show');
		} else {
			if (listPricingYear.classList.contains('show')) {
				listPricingYear.classList.remove('show');
			}
			listPricingYear.classList.add('hide');
			if (listPricingMonth.classList.contains('hide')) {
				listPricingMonth.classList.remove('hide');
			}
			listPricingMonth.classList.add('show');
		}
	});
}

// mobile menu
var mobileMenuBtn = document.querySelector('.menu-humburger');
var menuMobile = document.querySelector('#menu-mobile-block');
var menuMobileMain = document.querySelector('#menu-mobile-block .menu-mobile-main');
var closeMobileBtn = document.querySelector('#menu-mobile-block .close-block');
if (mobileMenuBtn) {
	mobileMenuBtn.addEventListener('click', function () {
		menuMobile.classList.toggle('open');
	});
}
var itemLinks = document.querySelectorAll('#menu-mobile-block .nav-item-mobile');
itemLinks.forEach(function (item) {
	item.addEventListener('click', function () {
		item.querySelector('.sub-nav-mobile').classList.toggle('open');
	});
});
if (closeMobileBtn) {
	closeMobileBtn.addEventListener('click', function () {
		menuMobile.classList.remove('open');
	});
}
if (menuMobile) {
	menuMobile.addEventListener('click', function () {
		menuMobile.classList.remove('open');
	});
}
if (menuMobileMain) {
	menuMobileMain.addEventListener('click', function (event) {
		event.stopPropagation();
	});
}
